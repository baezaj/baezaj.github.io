{
  "hash": "0b7dbbaea86e2faf94de10b1cc140edd",
  "result": {
    "markdown": "---\ntitle: \"Processing Thermo Log files \"\n# description:\nauthor:\n  - name: Josue Baeza\n    url: https://josuebaeza.com/\n    orcid: 0000-0003-4960-3905\ndate: 06-6-2024\ndate-modified: last-modified\ncategories: [Mass Spectrometry, Thermo, Orbitrap, Log files] # self-defined categories\n# image: \ntoc: true\ntoc-location: left\ntoc-expand: true\ndraft: false\n---\n\n\n## Background\n\nThermo mass spectrometers record daily *log* files that contain a lot of valuable information regarding the status of each instrument. The *log* files record data for temperature, pressure, voltages, etc. from numerous guages. Visualizing this data longitudinally can help assess instrument performance. \n\nIn this blog post, I will show you were to find the *log* files, how to import them, and how to visualize. \n\n### Supported Instruments\n\n* Q-Exactive family instruments\n* Exploris family instruments\n\n*Note: Orbitrap Eclipse instruments do generate log files, however, this blog post will only focus on the instruments above because I don't have access to Eclipse log files*\n\n\n### Directories\n\nData is located in the following directories for the different instruments\n\n#### Q Exactive\n\n`C:\\ProgramData\\Thermo\\Exactive\\Log`\n\n#### Exploris\n\n`C:\\ProgramData\\Thermo\\Exploris\\Log`\n\n#### Tribrids\n\n`C:\\Thermo\\Instruments\\TNG\\OrbitrapXXXXX\\X.X\\System\\logs`\n\n## Reading a *log* file\n\n### Libraries used\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(lubridate)\nlibrary(kableExtra)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# directory where I keep the log files\ndirectory <- \"QEHF_logfiles/\"\n\n# Reading the log files in the directory\nfilelist <- list.files(directory, pattern = \"InstrumentTemperature\", full.names = TRUE)\n\n# plucking a single log file to demonstrate\nfile <- filelist[1]\n```\n:::\n\n\n\n### Importing a single file\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlogfile <- read.delim2(file, sep = \"\\t\", header = FALSE)\n```\n:::\n\n\n\n\nDuring the file import, I'm using `header = FALSE`. The instrument log files do not always have the first row with the header information. \n\nAdditionally, the header row is often embedded multiple times in a single log file. Scroll down and see how many times this log file has the header information. This will need to be cleaned up in subsequent steps.\n\n\n::: {.cell .column-body-outset}\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; \"><table class=\"table table-striped table-hover\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V1 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V2 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V3 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V4 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V5 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V6 </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> V7 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Time [sec] </td>\n   <td style=\"text-align:left;\"> Date </td>\n   <td style=\"text-align:left;\"> Up-Time [days] </td>\n   <td style=\"text-align:left;\"> Vacuum 1 (HV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 2 (UHV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 3 (Fore) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 4/humidity [mbar] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472717488 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 08:10:49 </td>\n   <td style=\"text-align:left;\"> 0.696261574074 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 9.08652659437e-10 </td>\n   <td style=\"text-align:left;\"> 1.94529413747 </td>\n   <td style=\"text-align:left;\"> 0.00318003167635 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472718388 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 08:25:49 </td>\n   <td style=\"text-align:left;\"> 0.706678240741 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 9.08652659437e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.00311368869796 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472719288 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 08:40:49 </td>\n   <td style=\"text-align:left;\"> 0.717094907407 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 9.08652659437e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.00322504379452 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472720188 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 08:55:50 </td>\n   <td style=\"text-align:left;\"> 0.727511574074 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 8.7728322682e-10 </td>\n   <td style=\"text-align:left;\"> 1.91814355746 </td>\n   <td style=\"text-align:left;\"> 0.00684082905672 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472721088 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 09:10:49 </td>\n   <td style=\"text-align:left;\"> 0.737928240741 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 8.46996761706e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.00669811319081 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472721988 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 09:25:49 </td>\n   <td style=\"text-align:left;\"> 0.748333333333 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 8.24970070541e-10 </td>\n   <td style=\"text-align:left;\"> 1.91814355746 </td>\n   <td style=\"text-align:left;\"> 0.0072874821726 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472722888 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 09:40:49 </td>\n   <td style=\"text-align:left;\"> 0.758761574074 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 8.03516197533e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.00809764594458 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472723788 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 09:55:50 </td>\n   <td style=\"text-align:left;\"> 0.769166666667 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 7.82620246179e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.00965296908481 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472724688 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 10:10:49 </td>\n   <td style=\"text-align:left;\"> 0.779594907407 </td>\n   <td style=\"text-align:left;\"> 3.11495661746e-09 </td>\n   <td style=\"text-align:left;\"> 7.6899238779e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.00912523869282 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472725588 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 10:25:49 </td>\n   <td style=\"text-align:left;\"> 0.79 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 7.55601832902e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.0106509932333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472726488 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 10:40:49 </td>\n   <td style=\"text-align:left;\"> 0.800416666667 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 7.55601832902e-10 </td>\n   <td style=\"text-align:left;\"> 1.93167114622 </td>\n   <td style=\"text-align:left;\"> 0.0105764037999 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472727388 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 10:55:50 </td>\n   <td style=\"text-align:left;\"> 0.810833333333 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 7.42444449322e-10 </td>\n   <td style=\"text-align:left;\"> 1.91814355746 </td>\n   <td style=\"text-align:left;\"> 0.00965296908481 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472728288 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 11:10:49 </td>\n   <td style=\"text-align:left;\"> 0.82125 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 7.29516176808e-10 </td>\n   <td style=\"text-align:left;\"> 1.94529413747 </td>\n   <td style=\"text-align:left;\"> 0.00958536886394 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Time [sec] </td>\n   <td style=\"text-align:left;\"> Date </td>\n   <td style=\"text-align:left;\"> Up-Time [days] </td>\n   <td style=\"text-align:left;\"> Vacuum 1 (HV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 2 (UHV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 3 (Fore) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 4/humidity [mbar] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472739175 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 14:12:11 </td>\n   <td style=\"text-align:left;\"> 0.947233796296 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.04575561764e-09 </td>\n   <td style=\"text-align:left;\"> 1.95901320402 </td>\n   <td style=\"text-align:left;\"> 0.00827018148107 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472740075 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 14:27:16 </td>\n   <td style=\"text-align:left;\"> 0.957650462963 </td>\n   <td style=\"text-align:left;\"> 7.61202696136e-05 </td>\n   <td style=\"text-align:left;\"> 1.34912210331e-09 </td>\n   <td style=\"text-align:left;\"> 1.56448223228 </td>\n   <td style=\"text-align:left;\"> 0.0068890735804 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Time [sec] </td>\n   <td style=\"text-align:left;\"> Date </td>\n   <td style=\"text-align:left;\"> Up-Time [days] </td>\n   <td style=\"text-align:left;\"> Vacuum 1 (HV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 2 (UHV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 3 (Fore) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 4/humidity [mbar] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472740659 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 14:36:55 </td>\n   <td style=\"text-align:left;\"> 0.964421296296 </td>\n   <td style=\"text-align:left;\"> 3.82343674603e-05 </td>\n   <td style=\"text-align:left;\"> 1.06428819311e-09 </td>\n   <td style=\"text-align:left;\"> 1.6318609378 </td>\n   <td style=\"text-align:left;\"> 0.008748462243 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472741559 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 14:51:59 </td>\n   <td style=\"text-align:left;\"> 0.974826388889 </td>\n   <td style=\"text-align:left;\"> 3.20374527283e-09 </td>\n   <td style=\"text-align:left;\"> 1.05498121156e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00744275565021 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472742459 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 15:07:00 </td>\n   <td style=\"text-align:left;\"> 0.98525462963 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.05498121156e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00684082905672 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472743359 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 15:21:59 </td>\n   <td style=\"text-align:left;\"> 0.995659722222 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 1.08314919748e-09 </td>\n   <td style=\"text-align:left;\"> 1.57551564643 </td>\n   <td style=\"text-align:left;\"> 0.00637658107113 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472744262 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 15:37:02 </td>\n   <td style=\"text-align:left;\"> 1.00611111111 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.09270467533e-09 </td>\n   <td style=\"text-align:left;\"> 1.56448223228 </td>\n   <td style=\"text-align:left;\"> 0.00546313597647 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472745159 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 15:51:59 </td>\n   <td style=\"text-align:left;\"> 1.01649305556 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.10234445105e-09 </td>\n   <td style=\"text-align:left;\"> 1.52111585898 </td>\n   <td style=\"text-align:left;\"> 0.00439366931872 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472746059 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 16:07:00 </td>\n   <td style=\"text-align:left;\"> 1.02689814815 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.1317770349e-09 </td>\n   <td style=\"text-align:left;\"> 1.51046340923 </td>\n   <td style=\"text-align:left;\"> 0.00376427628788 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472746959 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 16:21:59 </td>\n   <td style=\"text-align:left;\"> 1.03731481481 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 1.1619954684e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00302737938512 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472747861 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 16:36:59 </td>\n   <td style=\"text-align:left;\"> 1.04775462963 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.1619954684e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00248661450305 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472748761 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 16:51:56 </td>\n   <td style=\"text-align:left;\"> 1.0581712963 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 1.18258801255e-09 </td>\n   <td style=\"text-align:left;\"> 1.52111585898 </td>\n   <td style=\"text-align:left;\"> 0.00216056211893 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472749661 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 17:07:00 </td>\n   <td style=\"text-align:left;\"> 1.06858796296 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.19302073372e-09 </td>\n   <td style=\"text-align:left;\"> 1.51046340923 </td>\n   <td style=\"text-align:left;\"> 0.00199983341008 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Time [sec] </td>\n   <td style=\"text-align:left;\"> Date </td>\n   <td style=\"text-align:left;\"> Up-Time [days] </td>\n   <td style=\"text-align:left;\"> Vacuum 1 (HV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 2 (UHV) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 3 (Fore) [mbar] </td>\n   <td style=\"text-align:left;\"> Vacuum 4/humidity [mbar] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472750010 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 17:12:51 </td>\n   <td style=\"text-align:left;\"> 1.07263888889 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.18258801255e-09 </td>\n   <td style=\"text-align:left;\"> 1.6318609378 </td>\n   <td style=\"text-align:left;\"> 0.00246920061846 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472750910 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 17:27:51 </td>\n   <td style=\"text-align:left;\"> 1.08305555556 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.20354549174e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00216056211893 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472751810 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 17:42:51 </td>\n   <td style=\"text-align:left;\"> 1.09347222222 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.19302073372e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00210067282044 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472752710 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 17:57:51 </td>\n   <td style=\"text-align:left;\"> 1.10388888889 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 1.20354549174e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00208596170458 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472753610 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 18:12:51 </td>\n   <td style=\"text-align:left;\"> 1.11429398148 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.20354549174e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00208596170458 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472754514 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 18:27:51 </td>\n   <td style=\"text-align:left;\"> 1.12475694444 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.18258801255e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00199983341008 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472755411 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 18:42:48 </td>\n   <td style=\"text-align:left;\"> 1.13513888889 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.18258801255e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.0106509932333 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472756315 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 18:57:51 </td>\n   <td style=\"text-align:left;\"> 1.14560185185 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.18258801255e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00214543159534 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472757212 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 19:12:49 </td>\n   <td style=\"text-align:left;\"> 1.1559837963 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.17224652338e-09 </td>\n   <td style=\"text-align:left;\"> 1.46859440062 </td>\n   <td style=\"text-align:left;\"> 0.00197192162236 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472758116 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 19:27:52 </td>\n   <td style=\"text-align:left;\"> 1.16644675926 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.1619954684e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.00214543159534 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472759013 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 19:42:49 </td>\n   <td style=\"text-align:left;\"> 1.1768287037 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.19302073372e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.0020568478194 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472759911 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 19:57:45 </td>\n   <td style=\"text-align:left;\"> 1.18721064815 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.1518340568e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.0108017539222 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472760814 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 20:12:49 </td>\n   <td style=\"text-align:left;\"> 1.19767361111 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.14176150465e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.00222215883613 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472761712 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 20:27:46 </td>\n   <td style=\"text-align:left;\"> 1.20805555556 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.1317770349e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.00213040703156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472762615 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 20:42:55 </td>\n   <td style=\"text-align:left;\"> 1.21851851852 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.14176150465e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00235067062559 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472763513 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 20:57:52 </td>\n   <td style=\"text-align:left;\"> 1.22890046296 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.1317770349e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00211548768554 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472764416 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 21:12:55 </td>\n   <td style=\"text-align:left;\"> 1.23936342593 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.12187987729e-09 </td>\n   <td style=\"text-align:left;\"> 1.49988555912 </td>\n   <td style=\"text-align:left;\"> 0.00236724858474 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472765314 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 21:27:53 </td>\n   <td style=\"text-align:left;\"> 1.24974537037 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.12187987729e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00213040703156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472766211 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 21:42:50 </td>\n   <td style=\"text-align:left;\"> 1.26012731481 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.11206926829e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.0105764037999 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472767115 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 21:57:53 </td>\n   <td style=\"text-align:left;\"> 1.27059027778 </td>\n   <td style=\"text-align:left;\"> 3.11495661746e-09 </td>\n   <td style=\"text-align:left;\"> 1.09270467533e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00235067062559 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472768012 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 22:12:50 </td>\n   <td style=\"text-align:left;\"> 1.28097222222 </td>\n   <td style=\"text-align:left;\"> 3.13692038539e-09 </td>\n   <td style=\"text-align:left;\"> 1.09270467533e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.0021911440399 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472768916 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 22:27:55 </td>\n   <td style=\"text-align:left;\"> 1.29143518519 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.08314919748e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.00240075607267 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472769813 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 22:42:53 </td>\n   <td style=\"text-align:left;\"> 1.30181712963 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.08314919748e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.00222215883613 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472770711 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 22:57:49 </td>\n   <td style=\"text-align:left;\"> 1.31221064815 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.06428819311e-09 </td>\n   <td style=\"text-align:left;\"> 1.48938178622 </td>\n   <td style=\"text-align:left;\"> 0.0102832331483 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472771614 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 23:12:52 </td>\n   <td style=\"text-align:left;\"> 1.32266203704 </td>\n   <td style=\"text-align:left;\"> 3.18131361724e-09 </td>\n   <td style=\"text-align:left;\"> 1.07367728031e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.00233420876271 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472772512 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 23:27:49 </td>\n   <td style=\"text-align:left;\"> 1.33305555556 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.07367728031e-09 </td>\n   <td style=\"text-align:left;\"> 1.46859440062 </td>\n   <td style=\"text-align:left;\"> 0.00210067282044 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472773415 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 23:42:53 </td>\n   <td style=\"text-align:left;\"> 1.34350694444 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.05498121156e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.0022536126348 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1472774313 </td>\n   <td style=\"text-align:left;\"> 2016-09-01 23:57:50 </td>\n   <td style=\"text-align:left;\"> 1.35387731481 </td>\n   <td style=\"text-align:left;\"> 3.15903902133e-09 </td>\n   <td style=\"text-align:left;\"> 1.05498121156e-09 </td>\n   <td style=\"text-align:left;\"> 1.47895157177 </td>\n   <td style=\"text-align:left;\"> 0.00204244361219 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n\n\n### Cleaning up header\n\nThese are the steps being performed in the following chunk.\n\n  1. Indexing the rows in a single log file that contain the header-row\n  2. Removing Non-ASCII characters from header\n  3. Assigning a header-row as column names\n  4. Removing all header-rows from log file\n  5. Cleaning up column names using the `janitor` package\n  \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Indexing the header-rows\nindex <- grep(\"[a-z]\", logfile[,3])\n\n# Removing Non-ASCII characters\nlogfile[index[1],] <- iconv(logfile[index[1],], \"utf-8\", \"ascii\", sub = \"\")\n\n# Assigning new column name\nnames(logfile) <- logfile[index[1],]\n\n# Removing header-rows\nlogfile <- logfile[-index,]\n\n# Cleaning column names\nlogfile <- logfile %>% clean_names(case = \"snake\") \n```\n:::\n\n\n\n### Formatting data types\n\nThe next step is to convert the dataframe to `numeric` and the date column to `datetime`. During the data import, the header-rows being present forced all columns to import as character type. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Creating a vector of date-time. I need to deal with this separately\ndate_column <- logfile$date\n\n# Removing the date column from the data frame\nlogfile$date <- NA\n\n# Need to convert the entire data frame to numeric\nlogfile <- as.data.frame(sapply(logfile, FUN = as.numeric))\n\n# Now that the data frame is numeric, I can add back the date-time\nlogfile$date <- date_column\n \n# Formatting date-time using lubridate\nlogfile$date <- ymd_hms(logfile$date)\n```\n:::\n\n\n\n## Putting it all together\n\nThis is the function used to import individual log files into a dataframe. \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nimport_orbitrap_logfiles <- function(file){\n  \n  # Loading libraries\n  require(tidyverse)\n  require(janitor)\n  require(lubridate)\n  \n  # Importing log file\n  logfile <- read.delim2(file, sep = \"\\t\", header = FALSE)\n  \n  # Indexing the header-rows\n  index <- grep(\"[a-z]\", logfile[,3])\n  \n  # Removing Non-ASCII characters\n  logfile[index[1],] <- iconv(logfile[index[1],], \"utf-8\", \"ascii\", sub = \"\")\n  \n  # Assigning new column name\n  names(logfile) <- logfile[index[1],]\n  \n  # Removing header-rows\n  logfile <- logfile[-index,]\n  \n  # Cleaning column names\n  logfile <- logfile %>% clean_names(case = \"snake\") \n  \n  # Creating a vector of date-time. I need to deal with this separately\n  date_column <- logfile$date\n  \n  # Removing the date-time from the dataframe\n  logfile$date <- NA\n  \n  # Need to convert the entire dataframe to numeric\n  logfile <- as.data.frame(sapply(logfile, FUN = as.numeric))\n  \n  # Now that the dataframe is numeric, I can add back the date-time\n  logfile$date <- date_column\n  \n  # Formatting date-time\n  logfile$date <- ymd_hms(logfile$date)\n  \n  # return dataframe\n  return(logfile)\n  \n}\n```\n:::\n\n\n\n\n\n### Reading many log files\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# directory where log files are kept\ndirectory <- \"QEHF_logfiles/\"\n\n# Reading the log files in the directory\nfilelist <- list.files(directory, pattern = \"InstrumentTemperature\", full.names = TRUE)\n\n# function to read in log files with some error handling\nread_logfile_to_df <- function(x){\n  tryCatch(import_orbitrap_logfiles(x),\n           error = function(e) NA,\n           warning = function(w) NA)\n}\n\n# importing log files and saving as a list\nlog <- filelist %>% \n  lapply(read_logfile_to_df) \n\n# Removing log files that generated an error\n# I can go back and investigate why this happened later\nlog <- log[which(!is.na(log))]\n\n# Concatenated files\ndata <- log %>% \n  bind_rows()\n```\n:::\n\n\n\n### Ambient Temperature plot\n\n\n\n::: {.cell .column-body-outset}\n\n```{.r .cell-code  code-fold=\"false\"}\ndata %>% \n  filter(date >= as.Date(\"2018-04-01\")) %>%\n  ggplot(aes(x = date)) +\n  geom_line(aes(y = ambient_temperature_raw_c)) +\n  theme_bw(base_size = 22) +\n  labs(x = NULL,\n       y = expression('Temp ('~degree*C*')')) +\n  scale_x_datetime(date_breaks = \"3 month\", \n                   date_minor_breaks = \"1 month\",\n                   date_labels = \"%b%y\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/Ambient Temp 1-1.png){width=1536}\n:::\n:::\n\n\n### Instrument readbacks\n\nThe log files record numerous instrument readbacks including:\n\n-   Ambient temperature\n-   Analyzer temperature\n-   CEPS Peltier temperature\n-   Fore vacuum pressure\n-   High vacuum pressure\n-   Ultra high vacuum pressure\n\nBelow is the full list of readbacks that are available for the QE-HF. \n\n*Note: The list of readbacks for each instrument will vary slightly depending on model and tune version*\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; \"><table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> Instrument Readbacks </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> up_time_days </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> vacuum_1_hv_mbar </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> vacuum_2_uhv_mbar </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> vacuum_3_fore_mbar </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> vacuum_4_humidity_mbar </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_temp_bearing_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_temp_motor_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_temp_bottompart_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_temp_powerstage_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_temp_electronics_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_volt_r_v </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo1_curr_r_a </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_temp_bearing_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_temp_motor_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_temp_bottompart_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_temp_powerstage_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_temp_electronics_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_volt_r_v </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo2_curr_r_a </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_temp_bearing_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_temp_motor_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_temp_bottompart_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_temp_powerstage_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_temp_electronics_r_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_volt_r_v </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> turbo3_curr_r_a </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ambient_temperature_raw_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ambient_humidity_result_percent </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> capillary_temperature_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> itv_gas_pressure_actual_bar </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ios_heatsink_temperature_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> inj_flat_ampl_vpp </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> inj_flat_freq_k_hz </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> bent_flat_freq_k_hz </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ios_rf2_3_freq_k_hz </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ctrap_rf_amp_vpp </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ctrap_amp_current_a </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ctrap_freq_m_hz </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ce_pos_electronics_temperature_act_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ce_neg_electronics_temperature_act_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> analyzer_temperature_sensor_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> analyzer_temp_sensor_filtered_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> analyzer_temperature_with_delay_model_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ceps_peltier_temperature_sensor_c </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> quad_detector_temperature_c </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}